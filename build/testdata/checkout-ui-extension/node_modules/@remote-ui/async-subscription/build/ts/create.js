"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createRemoteSubscribable = void 0;
const rpc_1 = require("@remote-ui/rpc");
function createRemoteSubscribable(subscription) {
    const initial = subscription.current;
    return {
        initial,
        subscribe(subscriber) {
            rpc_1.retain(subscriber);
            const unsubscribe = subscription.subscribe((value = subscription.current) => {
                subscriber(value);
            });
            const teardown = () => {
                unsubscribe();
                rpc_1.release(subscriber);
            };
            return [teardown, subscription.current];
        },
    };
}
exports.createRemoteSubscribable = createRemoteSubscribable;
