'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var rpc = require('@remote-ui/rpc');

function createRemoteSubscribable(subscription) {
  var initial = subscription.current;
  return {
    initial: initial,
    subscribe: function subscribe(subscriber) {
      rpc.retain(subscriber);
      var unsubscribe = subscription.subscribe(function () {
        var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : subscription.current;
        subscriber(value);
      });

      var teardown = function teardown() {
        unsubscribe();
        rpc.release(subscriber);
      };

      return [teardown, subscription.current];
    }
  };
}

exports.createRemoteSubscribable = createRemoteSubscribable;
