import { renderComponent } from './RemoteComponent.esnext';
import { renderText } from './RemoteText.esnext';

function createController(components, {
  renderComponent: externalRenderComponent,
  renderText: externalRenderText
} = {}) {
  const registry = new Map(Object.entries(components));
  const renderComponent$1 = externalRenderComponent ? componentProps => externalRenderComponent(componentProps, {
    renderDefault() {
      return renderComponent(componentProps);
    }

  }) : renderComponent;
  const renderText$1 = externalRenderText ? textProps => externalRenderText(textProps, {
    renderDefault() {
      return renderText(textProps);
    }

  }) : renderText;
  return {
    get(type) {
      const value = registry.get(type);

      if (value == null) {
        throw new Error(`Unknown component: ${type}`);
      }

      return value;
    },

    renderer: {
      renderComponent: renderComponent$1,
      renderText: renderText$1
    }
  };
}

export { createController };
