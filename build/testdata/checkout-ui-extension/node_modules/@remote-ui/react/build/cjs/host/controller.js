'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var RemoteComponent = require('./RemoteComponent.js');
var RemoteText = require('./RemoteText.js');

function createController(components) {
  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
      externalRenderComponent = _ref.renderComponent,
      externalRenderText = _ref.renderText;

  var registry = new Map(Object.entries(components));
  var renderComponent = externalRenderComponent ? function (componentProps) {
    return externalRenderComponent(componentProps, {
      renderDefault: function renderDefault() {
        return RemoteComponent.renderComponent(componentProps);
      }
    });
  } : RemoteComponent.renderComponent;
  var renderText = externalRenderText ? function (textProps) {
    return externalRenderText(textProps, {
      renderDefault: function renderDefault() {
        return RemoteText.renderText(textProps);
      }
    });
  } : RemoteText.renderText;
  return {
    get: function get(type) {
      var value = registry.get(type);

      if (value == null) {
        throw new Error("Unknown component: ".concat(type));
      }

      return value;
    },
    renderer: {
      renderComponent: renderComponent,
      renderText: renderText
    }
  };
}

exports.createController = createController;
