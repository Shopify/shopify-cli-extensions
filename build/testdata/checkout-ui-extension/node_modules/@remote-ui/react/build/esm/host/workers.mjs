import { useRef, useEffect } from 'react';
import { terminate } from '@remote-ui/web-workers';

function useWorker(creator) {
  var workerRef = useRef(null);

  if (workerRef.current === null) {
    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      args[_key - 1] = arguments[_key];
    }

    workerRef.current = creator.apply(void 0, args);
  }

  var worker = workerRef.current;
  useEffect(function () {
    return function () {
      terminate(worker);
    };
  }, [worker]);
  return worker;
}

export { useWorker };
