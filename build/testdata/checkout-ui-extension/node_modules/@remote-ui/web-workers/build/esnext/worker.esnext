import { createEndpoint, fromWebWorker } from '@remote-ui/rpc';

const endpoint = createEndpoint(fromWebWorker(self), {
  callable: []
});
self.addEventListener('message', ({
  data
}) => {
  if (data == null) {
    return;
  }

  if (data.__replace instanceof MessagePort) {
    endpoint.replace(data.__replace);

    data.__replace.start();
  }
});
Object.defineProperty(self, 'endpoint', {
  value: endpoint,
  enumerable: false,
  writable: false,
  configurable: true
});

export { endpoint };
